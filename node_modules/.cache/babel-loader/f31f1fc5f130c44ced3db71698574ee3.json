{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n/**\n * Kushki file\n */\n\nvar Identifiers_1 = require(\"./../lib/constant/Identifiers\");\n\nvar KushkiError_1 = require(\"./../lib/generic/KushkiError\");\n\nvar Container_1 = require(\"./../lib/infrastructure/Container\");\n\nrequire(\"reflect-metadata\");\n\nvar errors_1 = require(\"request-promise/errors\");\n/**\n * Implementation\n */\n\n\nvar Kushki =\n/** @class */\nfunction () {\n  function Kushki(body) {\n    body.inTestEnvironment = body.inTestEnvironment === undefined ? false : body.inTestEnvironment;\n    body.regional = body.regional === undefined ? false : body.regional;\n    this._merchantId = body.merchantId;\n    this._inTestEnvironment = body.inTestEnvironment;\n    this._regional = body.regional;\n    this._cardService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardService)(this._regional);\n    this._transferService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.TransferService)(this._regional);\n    this._cashService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CashService)(this._regional);\n    this._multiMerchantInfoService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.MultiMerchantService)(this._regional);\n    this._commissionService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CommissionService)(this._regional);\n    this._kushkiService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.KushkiService)(this._regional);\n    this._secureService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.SecureService)();\n    this._cardAsyncService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardAsyncService)();\n    this._payoutsCashService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.PayoutsCashService)(this._regional);\n    this._payoutsTransferService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.PayoutsTransferService)(this._regional);\n    this._transferSubscriptionService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.TransferSubscriptionService)(this._regional);\n    this._mobileProcessorService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.MobileProcessorService)();\n  }\n\n  Kushki.prototype.requestToken = function (body, callback) {\n    this._resolve(this._cardService.requestToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestTokenCharge = function (body, callback) {\n    this._resolve(this._cardService.requestTokenCharge(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestSubscriptionToken = function (body, callback) {\n    this._resolve(this._cardService.requestSubscriptionToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestTransferToken = function (body, callback) {\n    this._resolve(this._transferService.requestTransferToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.checkStatus = function (callback) {\n    this._resolve(this._kushkiService.checkStatus(this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestPseBankList = function (callback) {\n    this._resolve(this._transferService.requestPseBankList(this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestDeferred = function (body, callback) {\n    this._resolve(this._cardService.requestDeferred(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestBinInfo = function (body, callback) {\n    this._cardService.requestBinInfo(body, this._merchantId, this._inTestEnvironment, this._regional).subscribe({\n      error: function error(err) {\n        return Kushki._callbackError(err, callback);\n      },\n      next: function next(response) {\n        callback(response);\n      }\n    });\n  };\n\n  Kushki.prototype.requestBrandsByMerchant = function (callback) {\n    this._kushkiService.requestBrandsByMerchant(this._merchantId, this._inTestEnvironment, this._regional).subscribe({\n      error: function error(err) {\n        return Kushki._callbackError(err, callback);\n      },\n      next: function next(response) {\n        callback(response);\n      }\n    });\n  };\n\n  Kushki.prototype.requestCashToken = function (body, callback) {\n    this._resolve(this._cashService.requestCashToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestSecureServiceValidation = function (body, callback) {\n    this._resolve(this._secureService.requestSecureServiceValidation(this._merchantId, body, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestCardAsyncToken = function (body, callback) {\n    this._resolve(this._cardAsyncService.requestCardAsyncToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestSubscriptionCardAsyncToken = function (body, callback) {\n    this._resolve(this._cardAsyncService.requestCardSubscriptionAsyncToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.multiMerchantInfo = function (body, callback) {\n    this._resolve(this._multiMerchantInfoService.multiMerchantInfo(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestPayoutsCashToken = function (body, callback) {\n    this._resolve(this._payoutsCashService.requestPayoutsCashToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestPayoutsTransferToken = function (body, callback) {\n    this._resolve(this._payoutsTransferService.requestPayoutsTransferToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.getCommissionConfiguration = function (body, callback) {\n    this._resolve(this._commissionService.getCommissionConfiguration(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestTransferSubscriptionToken = function (body, callback) {\n    this._resolve(this._transferSubscriptionService.requestToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestTransferSubscriptionBankList = function (callback) {\n    this._resolve(this._transferSubscriptionService.requestBankList(this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestPayoutsTransferBankList = function (callback) {\n    this._resolve(this._payoutsTransferService.requestPayoutsTransferBankList(this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki.prototype.requestMobileProcessorToken = function (body, callback) {\n    this._resolve(this._mobileProcessorService.requestToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n  };\n\n  Kushki._callbackError = function (err, callback) {\n    if (err instanceof KushkiError_1.KushkiError) callback({\n      code: \"\" + err.code,\n      error: err.code + \" - \" + err.getMessage(),\n      message: \"\" + err.getMessage()\n    });else if (err instanceof errors_1.StatusCodeError) callback({\n      code: \"\" + err.error.code,\n      error: \"\" + err.error,\n      message: \"\" + err.error.message\n    });else callback({\n      code: \"K002\",\n      error: \"Ha ocurrido un error inesperado.\",\n      message: \"Ha ocurrido un error inesperado.\"\n    });\n  };\n\n  Kushki.prototype._resolve = function (observable, callback) {\n    observable.subscribe({\n      error: function error(err) {\n        return Kushki._callbackError(err, callback);\n      },\n      next: function next(response) {\n        callback(response);\n      }\n    });\n  };\n\n  return Kushki;\n}();\n\nexports.Kushki = Kushki;","map":{"version":3,"sources":["/Users/annaortega/Documents/workspace/api-sandbox-app/node_modules/@kushki/js/lib/Kushki.js"],"names":["exports","__esModule","Identifiers_1","require","KushkiError_1","Container_1","errors_1","Kushki","body","inTestEnvironment","undefined","regional","_merchantId","merchantId","_inTestEnvironment","_regional","_cardService","CONTAINER","get","IDENTIFIERS","CardService","_transferService","TransferService","_cashService","CashService","_multiMerchantInfoService","MultiMerchantService","_commissionService","CommissionService","_kushkiService","KushkiService","_secureService","SecureService","_cardAsyncService","CardAsyncService","_payoutsCashService","PayoutsCashService","_payoutsTransferService","PayoutsTransferService","_transferSubscriptionService","TransferSubscriptionService","_mobileProcessorService","MobileProcessorService","prototype","requestToken","callback","_resolve","requestTokenCharge","requestSubscriptionToken","requestTransferToken","checkStatus","requestPseBankList","requestDeferred","requestBinInfo","subscribe","error","err","_callbackError","next","response","requestBrandsByMerchant","requestCashToken","requestSecureServiceValidation","requestCardAsyncToken","requestSubscriptionCardAsyncToken","requestCardSubscriptionAsyncToken","multiMerchantInfo","requestPayoutsCashToken","requestPayoutsTransferToken","getCommissionConfiguration","requestTransferSubscriptionToken","requestTransferSubscriptionBankList","requestBankList","requestPayoutsTransferBankList","requestMobileProcessorToken","KushkiError","code","getMessage","message","StatusCodeError","observable"],"mappings":"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","sourcesContent":["\"use strict\";\nexports.__esModule = true;\n/**\n * Kushki file\n */\nvar Identifiers_1 = require(\"./../lib/constant/Identifiers\");\nvar KushkiError_1 = require(\"./../lib/generic/KushkiError\");\nvar Container_1 = require(\"./../lib/infrastructure/Container\");\nrequire(\"reflect-metadata\");\nvar errors_1 = require(\"request-promise/errors\");\n/**\n * Implementation\n */\nvar Kushki = /** @class */ (function () {\n    function Kushki(body) {\n        body.inTestEnvironment =\n            body.inTestEnvironment === undefined ? false : body.inTestEnvironment;\n        body.regional = body.regional === undefined ? false : body.regional;\n        this._merchantId = body.merchantId;\n        this._inTestEnvironment = body.inTestEnvironment;\n        this._regional = body.regional;\n        this._cardService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardService)(this._regional);\n        this._transferService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.TransferService)(this._regional);\n        this._cashService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CashService)(this._regional);\n        this._multiMerchantInfoService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.MultiMerchantService)(this._regional);\n        this._commissionService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CommissionService)(this._regional);\n        this._kushkiService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.KushkiService)(this._regional);\n        this._secureService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.SecureService)();\n        this._cardAsyncService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardAsyncService)();\n        this._payoutsCashService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.PayoutsCashService)(this._regional);\n        this._payoutsTransferService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.PayoutsTransferService)(this._regional);\n        this._transferSubscriptionService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.TransferSubscriptionService)(this._regional);\n        this._mobileProcessorService = Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.MobileProcessorService)();\n    }\n    Kushki.prototype.requestToken = function (body, callback) {\n        this._resolve(this._cardService.requestToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestTokenCharge = function (body, callback) {\n        this._resolve(this._cardService.requestTokenCharge(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestSubscriptionToken = function (body, callback) {\n        this._resolve(this._cardService.requestSubscriptionToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestTransferToken = function (body, callback) {\n        this._resolve(this._transferService.requestTransferToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.checkStatus = function (callback) {\n        this._resolve(this._kushkiService.checkStatus(this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestPseBankList = function (callback) {\n        this._resolve(this._transferService.requestPseBankList(this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestDeferred = function (body, callback) {\n        this._resolve(this._cardService.requestDeferred(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestBinInfo = function (body, callback) {\n        this._cardService\n            .requestBinInfo(body, this._merchantId, this._inTestEnvironment, this._regional)\n            .subscribe({\n            error: function (err) {\n                return Kushki._callbackError(err, callback);\n            },\n            next: function (response) {\n                callback(response);\n            }\n        });\n    };\n    Kushki.prototype.requestBrandsByMerchant = function (callback) {\n        this._kushkiService\n            .requestBrandsByMerchant(this._merchantId, this._inTestEnvironment, this._regional)\n            .subscribe({\n            error: function (err) {\n                return Kushki._callbackError(err, callback);\n            },\n            next: function (response) {\n                callback(response);\n            }\n        });\n    };\n    Kushki.prototype.requestCashToken = function (body, callback) {\n        this._resolve(this._cashService.requestCashToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestSecureServiceValidation = function (body, callback) {\n        this._resolve(this._secureService.requestSecureServiceValidation(this._merchantId, body, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestCardAsyncToken = function (body, callback) {\n        this._resolve(this._cardAsyncService.requestCardAsyncToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestSubscriptionCardAsyncToken = function (body, callback) {\n        this._resolve(this._cardAsyncService.requestCardSubscriptionAsyncToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.multiMerchantInfo = function (body, callback) {\n        this._resolve(this._multiMerchantInfoService.multiMerchantInfo(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestPayoutsCashToken = function (body, callback) {\n        this._resolve(this._payoutsCashService.requestPayoutsCashToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestPayoutsTransferToken = function (body, callback) {\n        this._resolve(this._payoutsTransferService.requestPayoutsTransferToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.getCommissionConfiguration = function (body, callback) {\n        this._resolve(this._commissionService.getCommissionConfiguration(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestTransferSubscriptionToken = function (body, callback) {\n        this._resolve(this._transferSubscriptionService.requestToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestTransferSubscriptionBankList = function (callback) {\n        this._resolve(this._transferSubscriptionService.requestBankList(this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestPayoutsTransferBankList = function (callback) {\n        this._resolve(this._payoutsTransferService.requestPayoutsTransferBankList(this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki.prototype.requestMobileProcessorToken = function (body, callback) {\n        this._resolve(this._mobileProcessorService.requestToken(body, this._merchantId, this._inTestEnvironment, this._regional), callback);\n    };\n    Kushki._callbackError = function (err, callback) {\n        if (err instanceof KushkiError_1.KushkiError)\n            callback({\n                code: \"\" + err.code,\n                error: err.code + \" - \" + err.getMessage(),\n                message: \"\" + err.getMessage()\n            });\n        else if (err instanceof errors_1.StatusCodeError)\n            callback({\n                code: \"\" + err.error.code,\n                error: \"\" + err.error,\n                message: \"\" + err.error.message\n            });\n        else\n            callback({\n                code: \"K002\",\n                error: \"Ha ocurrido un error inesperado.\",\n                message: \"Ha ocurrido un error inesperado.\"\n            });\n    };\n    Kushki.prototype._resolve = function (observable, callback) {\n        observable.subscribe({\n            error: function (err) { return Kushki._callbackError(err, callback); },\n            next: function (response) {\n                callback(response);\n            }\n        });\n    };\n    return Kushki;\n}());\nexports.Kushki = Kushki;\n"]},"metadata":{},"sourceType":"script"}