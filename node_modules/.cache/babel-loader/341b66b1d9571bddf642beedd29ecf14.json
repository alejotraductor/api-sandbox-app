{"ast":null,"code":"\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nexports.__esModule = true;\n/**\n * Kushki Gateway File\n */\n\n/* tslint:disable: no-unnecessary-callback-wrapper */\n\nvar AurusError_1 = require(\"./../../lib/generic/AurusError\");\n\nvar EnvironmentEnum_1 = require(\"./../../lib/infrastructure/EnvironmentEnum\");\n\nvar PathEnum_1 = require(\"./../../lib/infrastructure/PathEnum\");\n\nvar inversify_1 = require(\"inversify\");\n\nrequire(\"reflect-metadata\");\n\nvar rp = require(\"request-promise\");\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar operators_1 = require(\"rxjs/operators\");\n/**\n * Kushki Gateway Implementation\n */\n\n\nvar KushkiGateway =\n/** @class */\nfunction () {\n  function KushkiGateway() {\n    this._publicHeader = \"Public-Merchant-Id\";\n    this._uatUrl = \"\";\n    this._prodUrl = \"\";\n  }\n\n  KushkiGateway_1 = KushkiGateway;\n\n  KushkiGateway._aurusError = function (data) {\n    return data.hasOwnProperty(\"response_code\");\n  };\n\n  KushkiGateway.prototype.request = function (body, mid, path, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(this._assignChannel(regional, path)).pipe(operators_1.switchMap(function () {\n      var _a;\n\n      return rp.post({\n        body: body,\n        headers: (_a = {}, _a[_this._publicHeader] = mid, _a),\n        json: true,\n        uri: testEnv ? _this._uatUrl : _this._prodUrl\n      });\n    }), operators_1.catchError(function (err) {\n      if (err.name === \"StatusCodeError\" && KushkiGateway_1._aurusError(err.error)) throw new AurusError_1.AurusError(err.error.response_code, err.error.response_text);\n      return rxjs_1.throwError(err);\n    }));\n  };\n\n  KushkiGateway.prototype.requestGet = function (path, testEnv, regional, mid) {\n    var _this = this;\n\n    return rxjs_1.of(this._assignChannel(regional, path)).pipe(operators_1.switchMap(function () {\n      var _a;\n\n      return rp.get({\n        headers: (_a = {}, _a[_this._publicHeader] = mid, _a),\n        json: true,\n        uri: testEnv ? _this._uatUrl : _this._prodUrl\n      });\n    }), operators_1.catchError(function (err) {\n      return rxjs_1.throwError(err);\n    }));\n  };\n\n  KushkiGateway.prototype.requestBrandsByMerchant = function (mid, testEnv, regional) {\n    return this.requestGet(\"\" + PathEnum_1.PathEnum.brands_by_merchant, testEnv, regional, mid);\n  };\n\n  KushkiGateway.prototype.requestToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.card_tokens, testEnv, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestTokenCharge = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, \"\" + PathEnum_1.PathEnum.card_token_charge + body.subscriptionId + PathEnum_1.PathEnum.card_token_charge, testEnv, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestSubscriptionToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.card_subscription_tokens, testEnv, regional);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestTransferToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.transfer_tokens, testEnv, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestMerchantSettings = function (mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.requestGet(PathEnum_1.PathEnum.merchant_settings + \"settings\", testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestPseBankList = function (mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.requestGet(PathEnum_1.PathEnum.bank_list, testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestDeferredConditions = function (mid, bin, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.requestGet(\"\" + PathEnum_1.PathEnum.deferred_options + bin, testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestBinInfo = function (mid, bin, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.requestGet(\"\" + PathEnum_1.PathEnum.bin_info + bin, testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestCashToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.cash_tokens, testEnv, regional);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.checkStatus = function (mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.requestGet(\"\" + PathEnum_1.PathEnum.gateway_status, testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestSecureServiceValidation = function (mid, request, isTest, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(request, mid, \"\" + PathEnum_1.PathEnum.secure_validation, isTest, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestCardAsyncToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.card_async_tokens, testEnv, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestSubscriptionCardAsyncToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.subscription_card_async_tokens, testEnv, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.multiMerchantInfo = function (request, mid, isTest, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(request, mid, \"\" + PathEnum_1.PathEnum.multi_merchant_commission, isTest, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestPayoutsCashToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.payouts_cash_tokens, testEnv, regional);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestPayoutsTransferToken = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.payouts_transfer_tokens, testEnv, regional);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.getCommissionConfiguration = function (request, mid, isTest, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(request, mid, \"\" + PathEnum_1.PathEnum.commission_configuration, isTest, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestTokenTransferSubscription = function (body, mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n      return _this.request(body, mid, PathEnum_1.PathEnum.transfer_subscription_tokens, testEnv, regional);\n    }));\n  };\n\n  KushkiGateway.prototype.requestBankList = function (mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.mergeMap(function () {\n      return _this.requestGet(PathEnum_1.PathEnum.bank_list_transfer_subscription, testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestPayoutsTransferBankList = function (mid, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.mergeMap(function () {\n      return _this.requestGet(PathEnum_1.PathEnum.bank_list_payouts_transfer, testEnv, regional, mid);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.requestMobileProcessorToken = function (body, publicCredential, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.switchMap(function () {\n      return _this.request(body, publicCredential, PathEnum_1.PathEnum.mobile_processor_token, testEnv, regional);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype.chargeMobileProcessor = function (body, publicCredential, testEnv, regional) {\n    var _this = this;\n\n    return rxjs_1.of(1).pipe(operators_1.switchMap(function () {\n      return _this.request(body, publicCredential, PathEnum_1.PathEnum.mobile_processor_charge, testEnv, regional);\n    }), operators_1.map(function (response) {\n      return response;\n    }));\n  };\n\n  KushkiGateway.prototype._assignChannel = function (regional, path) {\n    if (!regional) {\n      this._uatUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.uat + path;\n      this._prodUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.prod + path;\n    } else {\n      this._uatUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.regionalUat + path;\n      this._prodUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.regionalProd + path;\n    }\n\n    return true;\n  };\n\n  var KushkiGateway_1;\n  KushkiGateway = KushkiGateway_1 = __decorate([inversify_1.injectable()], KushkiGateway);\n  return KushkiGateway;\n}();\n\nexports.KushkiGateway = KushkiGateway;","map":{"version":3,"sources":["/Users/annaortega/Documents/workspace/api-sandbox-app/node_modules/@kushki/js/lib/gateway/KushkiGateway.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","exports","__esModule","AurusError_1","require","EnvironmentEnum_1","PathEnum_1","inversify_1","rp","rxjs_1","operators_1","KushkiGateway","_publicHeader","_uatUrl","_prodUrl","KushkiGateway_1","_aurusError","data","hasOwnProperty","prototype","request","body","mid","path","testEnv","regional","_this","of","_assignChannel","pipe","switchMap","_a","post","headers","json","uri","catchError","err","name","error","AurusError","response_code","response_text","throwError","requestGet","get","requestBrandsByMerchant","PathEnum","brands_by_merchant","requestToken","concatMap","card_tokens","requestTokenCharge","card_token_charge","subscriptionId","requestSubscriptionToken","card_subscription_tokens","map","response","requestTransferToken","transfer_tokens","requestMerchantSettings","merchant_settings","requestPseBankList","bank_list","requestDeferredConditions","bin","deferred_options","requestBinInfo","bin_info","requestCashToken","cash_tokens","checkStatus","gateway_status","requestSecureServiceValidation","isTest","secure_validation","requestCardAsyncToken","card_async_tokens","requestSubscriptionCardAsyncToken","subscription_card_async_tokens","multiMerchantInfo","multi_merchant_commission","requestPayoutsCashToken","payouts_cash_tokens","requestPayoutsTransferToken","payouts_transfer_tokens","getCommissionConfiguration","commission_configuration","requestTokenTransferSubscription","transfer_subscription_tokens","requestBankList","mergeMap","bank_list_transfer_subscription","requestPayoutsTransferBankList","bank_list_payouts_transfer","requestMobileProcessorToken","publicCredential","mobile_processor_token","chargeMobileProcessor","mobile_processor_charge","EnvironmentEnum","uat","prod","regionalUat","regionalProd","injectable"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nexports.__esModule = true;\n/**\n * Kushki Gateway File\n */\n/* tslint:disable: no-unnecessary-callback-wrapper */\nvar AurusError_1 = require(\"./../../lib/generic/AurusError\");\nvar EnvironmentEnum_1 = require(\"./../../lib/infrastructure/EnvironmentEnum\");\nvar PathEnum_1 = require(\"./../../lib/infrastructure/PathEnum\");\nvar inversify_1 = require(\"inversify\");\nrequire(\"reflect-metadata\");\nvar rp = require(\"request-promise\");\nvar rxjs_1 = require(\"rxjs\");\nvar operators_1 = require(\"rxjs/operators\");\n/**\n * Kushki Gateway Implementation\n */\nvar KushkiGateway = /** @class */ (function () {\n    function KushkiGateway() {\n        this._publicHeader = \"Public-Merchant-Id\";\n        this._uatUrl = \"\";\n        this._prodUrl = \"\";\n    }\n    KushkiGateway_1 = KushkiGateway;\n    KushkiGateway._aurusError = function (data) {\n        return data.hasOwnProperty(\"response_code\");\n    };\n    KushkiGateway.prototype.request = function (body, mid, path, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(this._assignChannel(regional, path)).pipe(operators_1.switchMap(function () {\n            var _a;\n            return rp.post({\n                body: body,\n                headers: (_a = {},\n                    _a[_this._publicHeader] = mid,\n                    _a),\n                json: true,\n                uri: testEnv ? _this._uatUrl : _this._prodUrl\n            });\n        }), operators_1.catchError(function (err) {\n            if (err.name === \"StatusCodeError\" &&\n                KushkiGateway_1._aurusError(err.error))\n                throw new AurusError_1.AurusError(err.error.response_code, err.error.response_text);\n            return rxjs_1.throwError(err);\n        }));\n    };\n    KushkiGateway.prototype.requestGet = function (path, testEnv, regional, mid) {\n        var _this = this;\n        return rxjs_1.of(this._assignChannel(regional, path)).pipe(operators_1.switchMap(function () {\n            var _a;\n            return rp.get({\n                headers: (_a = {},\n                    _a[_this._publicHeader] = mid,\n                    _a),\n                json: true,\n                uri: testEnv ? _this._uatUrl : _this._prodUrl\n            });\n        }), operators_1.catchError(function (err) { return rxjs_1.throwError(err); }));\n    };\n    KushkiGateway.prototype.requestBrandsByMerchant = function (mid, testEnv, regional) {\n        return this.requestGet(\"\" + PathEnum_1.PathEnum.brands_by_merchant, testEnv, regional, mid);\n    };\n    KushkiGateway.prototype.requestToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.card_tokens, testEnv, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestTokenCharge = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, \"\" + PathEnum_1.PathEnum.card_token_charge + body.subscriptionId + PathEnum_1.PathEnum.card_token_charge, testEnv, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestSubscriptionToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.card_subscription_tokens, testEnv, regional);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestTransferToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.transfer_tokens, testEnv, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestMerchantSettings = function (mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.requestGet(PathEnum_1.PathEnum.merchant_settings + \"settings\", testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestPseBankList = function (mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.requestGet(PathEnum_1.PathEnum.bank_list, testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestDeferredConditions = function (mid, bin, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.requestGet(\"\" + PathEnum_1.PathEnum.deferred_options + bin, testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestBinInfo = function (mid, bin, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.requestGet(\"\" + PathEnum_1.PathEnum.bin_info + bin, testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestCashToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.cash_tokens, testEnv, regional);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.checkStatus = function (mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.requestGet(\"\" + PathEnum_1.PathEnum.gateway_status, testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestSecureServiceValidation = function (mid, request, isTest, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(request, mid, \"\" + PathEnum_1.PathEnum.secure_validation, isTest, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestCardAsyncToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.card_async_tokens, testEnv, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestSubscriptionCardAsyncToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.subscription_card_async_tokens, testEnv, regional);\n        }));\n    };\n    KushkiGateway.prototype.multiMerchantInfo = function (request, mid, isTest, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(request, mid, \"\" + PathEnum_1.PathEnum.multi_merchant_commission, isTest, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestPayoutsCashToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.payouts_cash_tokens, testEnv, regional);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestPayoutsTransferToken = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.payouts_transfer_tokens, testEnv, regional);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.getCommissionConfiguration = function (request, mid, isTest, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(request, mid, \"\" + PathEnum_1.PathEnum.commission_configuration, isTest, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestTokenTransferSubscription = function (body, mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.concatMap(function () {\n            return _this.request(body, mid, PathEnum_1.PathEnum.transfer_subscription_tokens, testEnv, regional);\n        }));\n    };\n    KushkiGateway.prototype.requestBankList = function (mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.mergeMap(function () {\n            return _this.requestGet(PathEnum_1.PathEnum.bank_list_transfer_subscription, testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestPayoutsTransferBankList = function (mid, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.mergeMap(function () {\n            return _this.requestGet(PathEnum_1.PathEnum.bank_list_payouts_transfer, testEnv, regional, mid);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.requestMobileProcessorToken = function (body, publicCredential, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.switchMap(function () {\n            return _this.request(body, publicCredential, PathEnum_1.PathEnum.mobile_processor_token, testEnv, regional);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype.chargeMobileProcessor = function (body, publicCredential, testEnv, regional) {\n        var _this = this;\n        return rxjs_1.of(1).pipe(operators_1.switchMap(function () {\n            return _this.request(body, publicCredential, PathEnum_1.PathEnum.mobile_processor_charge, testEnv, regional);\n        }), operators_1.map(function (response) { return response; }));\n    };\n    KushkiGateway.prototype._assignChannel = function (regional, path) {\n        if (!regional) {\n            this._uatUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.uat + path;\n            this._prodUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.prod + path;\n        }\n        else {\n            this._uatUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.regionalUat + path;\n            this._prodUrl = \"\" + EnvironmentEnum_1.EnvironmentEnum.regionalProd + path;\n        }\n        return true;\n    };\n    var KushkiGateway_1;\n    KushkiGateway = KushkiGateway_1 = __decorate([\n        inversify_1.injectable()\n    ], KushkiGateway);\n    return KushkiGateway;\n}());\nexports.KushkiGateway = KushkiGateway;\n"]},"metadata":{},"sourceType":"script"}