{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nexports.__esModule = true;\n/**\n * Transfer Service file\n */\n\nvar Identifiers_1 = require(\"./../../lib/constant/Identifiers\");\n\nvar inversify_1 = require(\"inversify\");\n\nrequire(\"reflect-metadata\");\n\nvar operators_1 = require(\"rxjs/operators\");\n/**\n * Implementation\n */\n\n\nvar TransferService =\n/** @class */\nfunction () {\n  function TransferService(gateway, antiFraud) {\n    this._gateway = gateway;\n    this._antiFraud = antiFraud;\n  }\n\n  TransferService.prototype.requestTransferToken = function (request, mid, isTest, regional) {\n    var _this = this;\n\n    return this._gateway.requestMerchantSettings(mid, isTest, regional).pipe(operators_1.switchMap(function (merchant) {\n      var client = request.documentNumber !== undefined ? request.documentNumber : new Date().getTime().toString();\n      return _this._antiFraud.createSiftScienceSession(request.bankId, client, mid, isTest, merchant);\n    }), operators_1.switchMap(function (siftObject) {\n      return _this._gateway.requestTransferToken(__assign({}, request, siftObject), mid, isTest, regional);\n    }));\n  };\n\n  TransferService.prototype.requestPseBankList = function (mid, isTest, regional) {\n    return this._gateway.requestPseBankList(mid, isTest, regional);\n  };\n\n  TransferService = __decorate([inversify_1.injectable(), __param(0, inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)), __param(1, inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)), __metadata(\"design:paramtypes\", [Object, Object])], TransferService);\n  return TransferService;\n}();\n\nexports.TransferService = TransferService;","map":{"version":3,"sources":["/Users/annaortega/Documents/workspace/api-sandbox-app/node_modules/@kushki/js/lib/service/TransferService.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","d","Reflect","decorate","defineProperty","__metadata","k","v","metadata","__param","paramIndex","decorator","exports","__esModule","Identifiers_1","require","inversify_1","operators_1","TransferService","gateway","antiFraud","_gateway","_antiFraud","requestTransferToken","request","mid","isTest","regional","_this","requestMerchantSettings","pipe","switchMap","merchant","client","documentNumber","undefined","Date","getTime","toString","createSiftScienceSession","bankId","siftObject","requestPseBankList","injectable","inject","IDENTIFIERS","KushkiGateway","AntiFraud"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nexports.__esModule = true;\n/**\n * Transfer Service file\n */\nvar Identifiers_1 = require(\"./../../lib/constant/Identifiers\");\nvar inversify_1 = require(\"inversify\");\nrequire(\"reflect-metadata\");\nvar operators_1 = require(\"rxjs/operators\");\n/**\n * Implementation\n */\nvar TransferService = /** @class */ (function () {\n    function TransferService(gateway, antiFraud) {\n        this._gateway = gateway;\n        this._antiFraud = antiFraud;\n    }\n    TransferService.prototype.requestTransferToken = function (request, mid, isTest, regional) {\n        var _this = this;\n        return this._gateway.requestMerchantSettings(mid, isTest, regional).pipe(operators_1.switchMap(function (merchant) {\n            var client = request.documentNumber !== undefined\n                ? request.documentNumber\n                : new Date().getTime().toString();\n            return _this._antiFraud.createSiftScienceSession(request.bankId, client, mid, isTest, merchant);\n        }), operators_1.switchMap(function (siftObject) {\n            return _this._gateway.requestTransferToken(__assign({}, request, siftObject), mid, isTest, regional);\n        }));\n    };\n    TransferService.prototype.requestPseBankList = function (mid, isTest, regional) {\n        return this._gateway.requestPseBankList(mid, isTest, regional);\n    };\n    TransferService = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),\n        __param(1, inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),\n        __metadata(\"design:paramtypes\", [Object, Object])\n    ], TransferService);\n    return TransferService;\n}());\nexports.TransferService = TransferService;\n"]},"metadata":{},"sourceType":"script"}